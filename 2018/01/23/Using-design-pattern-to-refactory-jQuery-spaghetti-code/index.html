<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Using design pattern to refactory jQuery spaghetti code | Jason&#39;s blog</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="Javascript,Design Pattern,jQuery" />
    
    <meta name="description" content="jQuery 라이브러리를 이용하여 화면 개발을 많이 했었지만 Javascript 공부를 제대로 하지 않고 코드를 짜면 엉망진창이 되기 쉽상이었습니다. 특히 프로젝트가 끝나고 유지보수 단계에 들어가면 한군데 수정하면 다른데도 수정해야되고 정말 귀찮았습니다. 그래서 Javascript 기본 개념을 다시 깨우치고 공부하면서 터득한 걸 공유해보겠습니다. 일단 앞">
<meta name="keywords" content="Javascript,Design Pattern,jQuery">
<meta property="og:type" content="article">
<meta property="og:title" content="Using design pattern to refactory jQuery spaghetti code">
<meta property="og:url" content="http://jason0853.github.io/2018/01/23/Using-design-pattern-to-refactory-jQuery-spaghetti-code/index.html">
<meta property="og:site_name" content="Jason&#39;s blog">
<meta property="og:description" content="jQuery 라이브러리를 이용하여 화면 개발을 많이 했었지만 Javascript 공부를 제대로 하지 않고 코드를 짜면 엉망진창이 되기 쉽상이었습니다. 특히 프로젝트가 끝나고 유지보수 단계에 들어가면 한군데 수정하면 다른데도 수정해야되고 정말 귀찮았습니다. 그래서 Javascript 기본 개념을 다시 깨우치고 공부하면서 터득한 걸 공유해보겠습니다. 일단 앞">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://jason0853.github.io/images/javascript/javascript-logo.png">
<meta property="og:updated_time" content="2019-05-18T06:10:55.389Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Using design pattern to refactory jQuery spaghetti code">
<meta name="twitter:description" content="jQuery 라이브러리를 이용하여 화면 개발을 많이 했었지만 Javascript 공부를 제대로 하지 않고 코드를 짜면 엉망진창이 되기 쉽상이었습니다. 특히 프로젝트가 끝나고 유지보수 단계에 들어가면 한군데 수정하면 다른데도 수정해야되고 정말 귀찮았습니다. 그래서 Javascript 기본 개념을 다시 깨우치고 공부하면서 터득한 걸 공유해보겠습니다. 일단 앞">
<meta name="twitter:image" content="http://jason0853.github.io/images/javascript/javascript-logo.png">
    
    <link rel="canonical" href="http://jason0853.github.io/2018/01/23/using-design-pattern-to-refactory-jquery-spaghetti-code/"/>

    
        <link rel="alternate" href="/" title="Jason&#39;s blog" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-106873845-1', 'auto');
ga('send', 'pageview');

</script>
    
    



    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-3546887837495101",
    enable_page_level_ads: true
  });
</script>
</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">Tech blog</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Front-end/">Front-end</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Front-end/Javascript/">Javascript</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Front-end/React/">React</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Front-end/Typescript/">Typescript</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Ops/">Ops</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Ops/Docker/">Docker</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Ops/Git/">Git</a></li></ul></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Front-end/">Front-end</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/Front-end/Javascript/">Javascript</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 광고 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3546887837495101"
     data-ad-slot="6861569823"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
                            <article id="post-Using-design-pattern-to-refactory-jQuery-spaghetti-code" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        Using design pattern to refactory jQuery spaghetti code
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2018/01/23/Using-design-pattern-to-refactory-jQuery-spaghetti-code/" class="article-date">
            <time datetime="2018-01-23T05:56:06.000Z" itemprop="datePublished">2018-01-23</time>
        </a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Design-Pattern/">Design Pattern</a>, <a class="tag-link" href="/tags/Javascript/">Javascript</a>, <a class="tag-link" href="/tags/jQuery/">jQuery</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p><img src="../../../../images/javascript/javascript-logo.png" alt=""></p>
<p><strong>jQuery</strong> 라이브러리를 이용하여 화면 개발을 많이 했었지만 <strong>Javascript</strong> 공부를 제대로 하지 않고 코드를 짜면 엉망진창이 되기 쉽상이었습니다. 특히 프로젝트가 끝나고 유지보수 단계에 들어가면 한군데 수정하면 다른데도 수정해야되고 정말 귀찮았습니다. 그래서 Javascript 기본 개념을 다시 깨우치고 공부하면서 터득한 걸 공유해보겠습니다.</p>
<p>일단 앞으로 만들 결과물을 한 번 공개해보겠습니다.</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/f6zjqge8/embedded/result,html,css,js/light" frameborder="0" allowfullscreen></iframe>
<p>간단히 결과물을 설명해드리면, 좋아하는 선수 이름을 리스트에 추가, 삭제하는 기능과 라디오버튼이 on이였을 경우 count를 하고 off였을 경우는 count를 하지 않는 기능을 넣는 simple한 apllication입니다. CDN을 통해 <a href="https://cdnjs.com/libraries/jquery/1.12.4" target="_blank" rel="noopener">jquery 1.12.4</a>를 추가하였습니다. 이제 js 소스를 한번 살펴보겠습니다.</p>
<figure class="highlight js"><figcaption><span>script.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> players = [];</span><br><span class="line"></span><br><span class="line">checkCount();</span><br><span class="line"></span><br><span class="line">$(<span class="string">'#player'</span>).find(<span class="string">'button'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = $(<span class="string">'#player'</span>).find(<span class="string">'input'</span>).val(),</span><br><span class="line">      item = <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;li&gt;</span></span><br><span class="line"><span class="string">          &lt;span&gt;<span class="subst">$&#123;value&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">          &lt;button type="button"&gt;Delete&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">      `</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    alert(<span class="string">'Player 이름을 입력해주세요.'</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  $(<span class="string">'#player'</span>).find(<span class="string">'ul'</span>).append(item);</span><br><span class="line">  players.push(value);</span><br><span class="line">  $(<span class="string">'#player'</span>).find(<span class="string">'input'</span>).val(<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">  checkCount();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">'#player'</span>).find(<span class="string">'ul'</span>).on(<span class="string">'click'</span>, <span class="string">'button'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $remove = $(e.target).closest(<span class="string">'li'</span>),</span><br><span class="line">      idx = $(<span class="string">'#player'</span>).find(<span class="string">'ul'</span>).find(<span class="string">'li'</span>).index($remove);</span><br><span class="line"></span><br><span class="line">  $remove.remove();</span><br><span class="line">  players.splice(idx, <span class="number">1</span>);</span><br><span class="line">  checkCount();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">'#count'</span>).find(<span class="string">'.radios'</span>).find(<span class="string">'input'</span>).on(<span class="string">'change'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  checkCount();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> val = $(<span class="string">'#count'</span>).find(<span class="string">'input[type=radio]:checked'</span>).val(),</span><br><span class="line">      $result = $(<span class="string">'#count'</span>).find(<span class="string">'.result'</span>).find(<span class="string">'span'</span>);</span><br><span class="line">      </span><br><span class="line">  <span class="keyword">if</span> (val == <span class="string">'on'</span>) $result.text(players.length);</span><br><span class="line">  <span class="keyword">else</span> $result.text(<span class="string">'?'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>솔직히 코드 양이 많지 않아 spaghetti code처럼 보이지 않지만 한 페이지에 이런 기능들이 많다고 가정해봅시다.</p>
<h3 id="The-disadvantage-of-unstructured-spaghetti-code"><a href="#The-disadvantage-of-unstructured-spaghetti-code" class="headerlink" title="# The disadvantage of unstructured spaghetti code"></a># The disadvantage of unstructured spaghetti code</h3><ul>
<li>코드 양이 한 파일에 너무 많아 가독성이 좋지 않음.</li>
<li>유지보수 하기 어려움. - 기능 구분이 명확히 나누어 있지 않기 때문.</li>
</ul>
<p>우선 간단히 <strong>Object Literal Pattern</strong>을 사용하여 코드를 좀 더 효율적으로 개선해보겠습니다.</p>
<h3 id="Object-Literal-Pattern"><a href="#Object-Literal-Pattern" class="headerlink" title="# Object Literal Pattern"></a># Object Literal Pattern</h3><h4 id="Rule"><a href="#Rule" class="headerlink" title="Rule"></a>Rule</h4><ul>
<li>전역 변수 없애기.</li>
<li>관심사 분리하기.</li>
<li>DRY Code(Don’t Repeat Yourself) - 반복되는 코드를 사용하지 않기.</li>
<li>DOM Cache 하기.</li>
<li>메모리 누수 없애기 - 모든 이벤트는 unbind 될 수 있어야 함.</li>
</ul>
<figure class="highlight js"><figcaption><span>playerCount.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> peoepleCount = &#123;&#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(peopleCount); <span class="comment">//  Uncaught ReferenceError: playerCount is not defined</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>IIFE(Immediately Invoked Function Expressions)</strong>를 사용하면 전역변수 오염을 방지할 수 있습니다.</li>
</ul>
<figure class="highlight js"><figcaption><span>playerCount.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> playerCount = &#123;</span><br><span class="line">    players: [],</span><br><span class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.cacheDom();</span><br><span class="line">      <span class="keyword">this</span>.bindEvents();</span><br><span class="line">      <span class="keyword">this</span>.render();</span><br><span class="line">    &#125;,</span><br><span class="line">    cacheDom: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.$player = $(<span class="string">'#player'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$count = $(<span class="string">'#count'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$form = <span class="keyword">this</span>.$player.find(<span class="string">'.form'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$input = <span class="keyword">this</span>.$form.find(<span class="string">'input'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$button = <span class="keyword">this</span>.$form.find(<span class="string">'button'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$ul = <span class="keyword">this</span>.$player.find(<span class="string">'ul'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$result = <span class="keyword">this</span>.$count.find(<span class="string">'.result'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$radios = <span class="keyword">this</span>.$count.find(<span class="string">'.radios'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$span = <span class="keyword">this</span>.$result.find(<span class="string">'span'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$radioButton = <span class="keyword">this</span>.$radios.find(<span class="string">'input'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    bindEvents: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.$button.on(<span class="string">'click'</span>, <span class="keyword">this</span>.addPlayer.bind(<span class="keyword">this</span>));</span><br><span class="line">      <span class="keyword">this</span>.$ul.on(<span class="string">'click'</span>, <span class="string">'button'</span>, <span class="keyword">this</span>.deletePlayer.bind(<span class="keyword">this</span>));</span><br><span class="line">      <span class="keyword">this</span>.$radioButton.on(<span class="string">'change'</span>, <span class="keyword">this</span>.checkCount.bind(<span class="keyword">this</span>));</span><br><span class="line">    &#125;,</span><br><span class="line">    render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.checkCount();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  playerCount.init();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<ul>
<li><code>init</code> - <code>peopleCount</code> 객체를 초기화 시킵니다.</li>
<li><code>cacheDom</code> - Dom을 캐싱하기 때문에 성능면에서 효율적입니다.</li>
<li><code>bindEvents</code> - 모든 이벤트는 이 함수안에서 바인드됩니다.</li>
<li><code>render</code> - count 숫자를 렌더링 해줍니다.</li>
</ul>
<p><strong><em>주의) Event handler를 등록할 때 bind(this) 사용해야합니다.</em></strong></p>
<p>아래 예제 코드를 보시겠습니다.</p>
<figure class="highlight js"><figcaption><span>playerCount.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> playerCount = &#123;</span><br><span class="line">    players: [],</span><br><span class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.cacheDom();</span><br><span class="line">      <span class="keyword">this</span>.bindEvents();</span><br><span class="line">    &#125;,</span><br><span class="line">    cacheDom: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.$player = $(<span class="string">'#player'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$form = <span class="keyword">this</span>.$player.find(<span class="string">'.form'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$button = <span class="keyword">this</span>.$form.find(<span class="string">'button'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    bindEvents: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.$button.on(<span class="string">'click'</span>, <span class="keyword">this</span>.addPlayer);</span><br><span class="line">    &#125;,</span><br><span class="line">    render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'redner'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    addPlayer: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//  &lt;button type="button"&gt;Add&lt;/button&gt;</span></span><br><span class="line">      <span class="keyword">this</span>.render(); <span class="comment">//  Uncaught TypeError: this.render is not a function</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  playerCount.init();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<ul>
<li>Event handler 안에 <strong>this</strong>는 event target인 button을 가리키고 있기 때문에 <code>addPlayer</code>안에 있는 <strong>this</strong>는 <code>render</code> method를 찾을 수 없습니다.</li>
<li><strong>this</strong>의 context는 <code>playerCount</code>를 가리켜야합니다.</li>
</ul>
<figure class="highlight js"><figcaption><span>playerCount.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> playerCount = &#123;</span><br><span class="line">    players: [],</span><br><span class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.cacheDom();</span><br><span class="line">      <span class="keyword">this</span>.bindEvents();</span><br><span class="line">      <span class="keyword">this</span>.render();</span><br><span class="line">    &#125;,</span><br><span class="line">    cacheDom: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.$player = $(<span class="string">'#player'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$count = $(<span class="string">'#count'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$form = <span class="keyword">this</span>.$player.find(<span class="string">'.form'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$input = <span class="keyword">this</span>.$form.find(<span class="string">'input'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$button = <span class="keyword">this</span>.$form.find(<span class="string">'button'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$ul = <span class="keyword">this</span>.$player.find(<span class="string">'ul'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$result = <span class="keyword">this</span>.$count.find(<span class="string">'.result'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$radios = <span class="keyword">this</span>.$count.find(<span class="string">'.radios'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$span = <span class="keyword">this</span>.$result.find(<span class="string">'span'</span>);</span><br><span class="line">      <span class="keyword">this</span>.$radioButton = <span class="keyword">this</span>.$radios.find(<span class="string">'input'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    bindEvents: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.$button.on(<span class="string">'click'</span>, <span class="keyword">this</span>.addPlayer.bind(<span class="keyword">this</span>));</span><br><span class="line">      <span class="keyword">this</span>.$ul.on(<span class="string">'click'</span>, <span class="string">'button'</span>, <span class="keyword">this</span>.deletePlayer.bind(<span class="keyword">this</span>));</span><br><span class="line">      <span class="keyword">this</span>.$radioButton.on(<span class="string">'change'</span>, <span class="keyword">this</span>.checkCount.bind(<span class="keyword">this</span>));</span><br><span class="line">    &#125;,</span><br><span class="line">    render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.checkCount();</span><br><span class="line">    &#125;,</span><br><span class="line">    addPlayer: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> value = <span class="keyword">this</span>.$input.val(),</span><br><span class="line">          item = <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;li&gt;</span></span><br><span class="line"><span class="string">              &lt;span&gt;<span class="subst">$&#123;value&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">              &lt;button type="button"&gt;Delete&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;/li&gt;</span></span><br><span class="line"><span class="string">          `</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">        alert(<span class="string">'Player 이름을 입력해주세요.'</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">this</span>.players.push(value);</span><br><span class="line">      <span class="keyword">this</span>.$ul.append(item);</span><br><span class="line">      <span class="keyword">this</span>.$input.val(<span class="string">''</span>);</span><br><span class="line">      <span class="keyword">this</span>.render();</span><br><span class="line">    &#125;,</span><br><span class="line">    deletePlayer: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> $remove = $(e.target).closest(<span class="string">'li'</span>),</span><br><span class="line">          idx = <span class="keyword">this</span>.$ul.find(<span class="string">'li'</span>).index($remove);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.players.splice(idx, <span class="number">1</span>);</span><br><span class="line">      $remove.remove();</span><br><span class="line">      <span class="keyword">this</span>.render();</span><br><span class="line">    &#125;,</span><br><span class="line">    checkCount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> val = <span class="keyword">this</span>.$radios.find(<span class="string">'input[type=radio]:checked'</span>).val();</span><br><span class="line">      val == <span class="string">'on'</span> ? <span class="keyword">this</span>.$span.text(<span class="keyword">this</span>.players.length) : <span class="keyword">this</span>.$span.text(<span class="string">'?'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  playerCount.init();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>이제 모든 코드가 완성되었고 이전과 동일하게 작동합니다. 자바스크립트 코드만 변경되었습니다.</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/c2uk5mfj/embedded/result,js/light" frameborder="0" allowfullscreen></iframe>
<p>이전 코드보다 가독성이 좋아졌고 유지보수하기 편해졌습니다.<br>하지만 여기서 한 가지 상황을 더 가정해보겠습니다. 기능들이 더 추가될 예정이며 <code>playerCount</code>에 더 많은 속성과 메서드가 추가될 것입니다. 이런 상황들이 반복적으로 이어지다 보면 파일 하나에 너무 많은 기능이 집약되어 있어 지금처럼 한눈에 파악하기가 쉽지 않습니다.<br><strong>Revealing Module Pattern</strong>을 사용하여 <code>player</code>, <code>count</code> 두 객체를 따로 나눠보겠습니다.</p>
<h3 id="Revealing-Module-Pattern"><a href="#Revealing-Module-Pattern" class="headerlink" title="# Revealing Module Pattern"></a># Revealing Module Pattern</h3><h4 id="Rule-1"><a href="#Rule-1" class="headerlink" title="Rule"></a>Rule</h4><ul>
<li><strong>IIFE</strong>라 불리는 즉시 호출 함수를 사용함.</li>
<li>공개해도 지장이 없는 API만 return 시킴.</li>
<li>나머지는 접근가능하지 않도록 비공개 처리해줌.</li>
</ul>
<figure class="highlight js"><figcaption><span>player.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> player = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> players = [];</span><br><span class="line"></span><br><span class="line">  _render();</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_render</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'render'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">addPlayer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    addPlayer: addPlayer</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="built_in">console</span>.log(player);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output</span></span><br><span class="line"><span class="comment">render</span></span><br><span class="line"><span class="comment">&#123;addPlayer: ƒ&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Revealing Module Pattern</strong>의 기본 골격입니다.</li>
<li><code>players</code> 변수를 공개해버리면 외부에서 조작을 할 수 있기 때문에 비공개로 해놓아야합니다.</li>
</ul>
<figure class="highlight js"><figcaption><span>player.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> player = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> players = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// cache Dom</span></span><br><span class="line">  <span class="keyword">var</span> $player = $(<span class="string">'#player'</span>),</span><br><span class="line">      $form = $player.find(<span class="string">'.form'</span>),</span><br><span class="line">      $input = $form.find(<span class="string">'input'</span>),</span><br><span class="line">      $button = $form.find(<span class="string">'button'</span>),</span><br><span class="line">      $ul = $player.find(<span class="string">'ul'</span>);</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">  </span><br><span class="line">  <span class="comment">// bind events</span></span><br><span class="line">  $button.on(<span class="string">'click'</span>, addPlayer);</span><br><span class="line">  $ul.on(<span class="string">'click'</span>, <span class="string">'button'</span>, deletePlayer);</span><br><span class="line"></span><br><span class="line">  _render();</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_render</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    count.checkCount(players.length);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">addPlayer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value = $input.val(),</span><br><span class="line">        item = <span class="string">`</span></span><br><span class="line"><span class="string">          &lt;li&gt;</span></span><br><span class="line"><span class="string">            &lt;span&gt;<span class="subst">$&#123;value&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;button type="button"&gt;Delete&lt;/button&gt;</span></span><br><span class="line"><span class="string">          &lt;/li&gt;</span></span><br><span class="line"><span class="string">        `</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">      alert(<span class="string">'Player 이름을 입력해주세요.'</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    players.push(value);</span><br><span class="line">    $ul.append(item);</span><br><span class="line">    $input.val(<span class="string">''</span>);</span><br><span class="line">    _render();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">deletePlayer</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $remove = $(e.target).closest(<span class="string">'li'</span>),</span><br><span class="line">        idx = $ul.find(<span class="string">'li'</span>).index($remove);</span><br><span class="line"></span><br><span class="line">    players.splice(idx, <span class="number">1</span>);</span><br><span class="line">    $remove.remove();</span><br><span class="line">    _render();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    addPlayer: addPlayer,</span><br><span class="line">    deletePlayer: deletePlayer</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>count.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> count = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> number = <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// cache Dom</span></span><br><span class="line">  <span class="keyword">var</span> $count = $(<span class="string">'#count'</span>),</span><br><span class="line">      $result = $count.find(<span class="string">'.result'</span>),</span><br><span class="line">      $radios = $count.find(<span class="string">'.radios'</span>),</span><br><span class="line">      $span = $result.find(<span class="string">'span'</span>),</span><br><span class="line">      $radioButton = $radios.find(<span class="string">'input'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// bind event</span></span><br><span class="line">  $radioButton.on(<span class="string">'change'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    checkCount(number)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">checkCount</span>(<span class="params">newPlayer</span>) </span>&#123;</span><br><span class="line">    number = newPlayer;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> value = $radios.find(<span class="string">'input[type=radio]:checked'</span>).val();</span><br><span class="line">    value == <span class="string">'on'</span> ? $span.text(number) : $span.text(<span class="string">'?'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    checkCount: checkCount</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p><strong><em>주의) index.html에 script를 link시킬때 count.js가 player.js보다 위에 있어야됩니다. 그렇지 않으면 Uncaught TypeError: count.checkCount is not a function이라는 에러가 발생합니다.</em></strong></p>
<p>코드를 분할해 모듈화를 시켜보았습니다. 결과는 이전과 동일합니다.</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/xx2hz9pv/embedded/result,js/light" frameborder="0" allowfullscreen></iframe>
<p>마지막으로 한가지 상황을 더 가정해보겠습니다. 아래 코드를 보고 설명해보겠습니다.</p>
<figure class="highlight js"><figcaption><span>player.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> players = [];</span><br><span class="line"><span class="comment">// (중략)</span></span><br><span class="line">_render();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_render</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    count.checkCount(players.length);</span><br><span class="line">    header.showCount(players.length);</span><br><span class="line">    footer.displayCount(players.length);</span><br><span class="line">    sidebar.count(&#123; <span class="attr">count</span>: player.length &#125;);</span><br><span class="line">    <span class="comment">// 이런식으로 반복 ...</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// (중략)</span></span><br></pre></td></tr></table></figure>
<p>이런식으로 <code>header</code>, <code>footer</code>, <code>sidebar</code> 이런 세개의 화면을 작업하여 모듈화 작업을 했다고 가정해봅시다. 그리고 count를 이 세군데에 보여주어야합니다. 그래서 <code>player</code>코드 객체 안에 함수들을 호출하였습니다. <code>players</code> 배열을 통해 count를 셀 수 있는데 비공개이기 때문에 다른 객체에서 접근할 수가 없습니다. 그렇다고 계속 이런식으로 호출하면 <code>_render</code>함수 안에 너무 많은 함수 리스트가 쌓입니다. 더 좋은 방법이 없을까요?<br>바로 <strong>PubSub Design Pattern</strong>을 사용하여 해결해보겠습니다.</p>
<h3 id="PubSub-Design-Pattern"><a href="#PubSub-Design-Pattern" class="headerlink" title="# PubSub Design Pattern"></a># PubSub Design Pattern</h3><p><div id="sequence-0"></div><br><strong>PubSub Design Pattern</strong>은 발행(publish)/구독(subscribbe) 모델로 알려져 있으며 어떤 대상의 상태값이 변경되었을 경우 이를 감지하고 있는 구독자들은 이것을 인지하고 자동으로 업데이트 해줍니다. 분산 이벤트 시스템을 구현할 때 널리 사용됩니다.</p>
<script src="//gist.github.com/d60d8c0612c6f74d17462667c65072a7.js"></script>
<ul>
<li><code>subjects</code> - 구독할 이벤트를 저장하는 공간이며 비공개로 처리하였습니다. 비공개 멤버인 이유는 외부에서 조작할 수 없도록 하기 위함입니다.</li>
<li><code>subscribe</code> - 구독할 이벤트를 <code>subjects</code> 객체에 저장합니다.</li>
<li><code>unsubscribe</code> - 구독할 이벤트를 <code>subjects</code> 객체에서 삭제합니다.</li>
<li><code>publish</code> - 저장된 구독이벤트들에게 알림을 보내고 함수를 호출합니다.</li>
</ul>
<p>간단히 <strong>PubSub Design Pattern</strong>을 구현해보았습니다.<br>우선 header 하나가 추가된다는 전제하에 코드를 수정해보고 <code>pubsub</code>을 이용하여 구독, 취소, 발행 기능을 추가해보겠습니다.</p>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- (중략) --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 추가된 부분 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">  인원 <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 추가된 부분 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"player"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- (중략) --&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>header.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> header = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// cache Dom</span></span><br><span class="line">  <span class="keyword">var</span> $header = $(<span class="string">'#header'</span>),</span><br><span class="line">      $span = $header.find(<span class="string">'span'</span>);</span><br><span class="line"></span><br><span class="line">  pubsub.subscribe(<span class="string">'changedCount'</span>, showCount);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">showCount</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    $span.text(num);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">shareData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $span.text();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    shareData: shareData</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<ul>
<li><code>shareData</code> - <code>count</code>에서 카운트 값을 공유할 API 입니다.</li>
</ul>
<figure class="highlight js"><figcaption><span>count.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> count = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> number = <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// cache Dom</span></span><br><span class="line">  <span class="keyword">var</span> $count = $(<span class="string">'#count'</span>),</span><br><span class="line">      $result = $count.find(<span class="string">'.result'</span>),</span><br><span class="line">      $radios = $count.find(<span class="string">'.radios'</span>),</span><br><span class="line">      $span = $result.find(<span class="string">'span'</span>),</span><br><span class="line">      $radioButton = $radios.find(<span class="string">'input'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// bind event</span></span><br><span class="line">  pubsub.subscribe(<span class="string">'changedCount'</span>, checkCount);</span><br><span class="line">  </span><br><span class="line">  $radioButton.on(<span class="string">'change'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value = $(e.target).val() == <span class="string">'on'</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (value) &#123;</span><br><span class="line">      resume();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      destroy();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">checkCount</span>(<span class="params">newPlayer</span>) </span>&#123;</span><br><span class="line">    number = newPlayer;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> value = $radios.find(<span class="string">'input[type=radio]:checked'</span>).val();</span><br><span class="line">    value == <span class="string">'on'</span> ? $span.text(number) : $span.text(<span class="string">'?'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* pubsub event */</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resume</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    number = header.shareData(); </span><br><span class="line">    $span.text(number);</span><br><span class="line">    pubsub.subscribe(<span class="string">'changedCount'</span>, checkCount);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">destroy</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    pubsub.unsubscribe(<span class="string">'changedCount'</span>, checkCount);</span><br><span class="line">    $span.text(<span class="string">'?'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<ul>
<li><code>pubsub</code>을 이용했기 때문에 굳이 외부로 checkCount를 공개 API롤 설정하지 않아도 됩니다.</li>
<li>구독취소(<code>unsubscribe</code>)를 하면 다시 구독하게 되었을 때 기존의 있던 값을 노출시키기 때문에 <code>header.shareData()</code> 호출하여 카운트값을 공유합니다.</li>
</ul>
<figure class="highlight js"><figcaption><span>player.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (중략)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_render</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  pubsub.publish(<span class="string">'changedCount'</span>, players.length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// (중략)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>발행 기능을 추가함으로써 기존 모듈 하나하나를 추가할 때마다 <code>_render</code> 함수안에서 호출하지 않아도 됩니다. 코드가 훨씬 깔끔해졌습니다.</li>
</ul>
<p>각 모듈들을 pubsub.js -&gt; count.js -&gt; header.js -&gt; player.js 순서로 불러와야 오류없이 작동됩니다.<br>제대로 작동하는지 한번 확인해보겠습니다.</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/rbr1bgg7/embedded/result,js,html/light" frameborder="0" allowfullscreen></iframe>
<h3 id="Wrap-up"><a href="#Wrap-up" class="headerlink" title="Wrap-up"></a>Wrap-up</h3><p>자바스크립트 디자인 패턴을 적용하게 되면은 규모가 큰 어플리케이션에서 좀 더 생산적이고 효율적으로 작업을 할 수 있습니다. 포스팅을 보시고 수정 혹은 잘못된 부분은 댓글 부탁드립니다.</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a href="https://stackoverflow.com/questions/30793066/how-to-avoid-memory-leaks-from-jquery" target="_blank" rel="noopener">Stackoverflow - How to avoid memory leaks from jQuery?</a><br><a href="https://hackernoon.com/observer-vs-pub-sub-pattern-50d3b27f838c" target="_blank" rel="noopener">Observer vs Pub-Sub pattern</a></p>
<p><script src="https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.27/webfontloader.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.1/snap.svg-min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js"></script><textarea id="sequence-0-code" style="display: none">Publisher->Event Channel: Publish Event(발행)
Event Channel->Subscriber: Fire Event(발행 알림)
Subscriber-->Event Channel: Subscriber(구독 신청)</textarea><textarea id="sequence-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12,"theme":"simple"}</textarea><script>  var code = document.getElementById("sequence-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("sequence-0-options").value));  var diagram = Diagram.parse(code);  diagram.drawSVG("sequence-0", options);</script></p>

        </div>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 광고 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3546887837495101"
     data-ad-slot="6861569823"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
        <footer class="article-footer">
            



    <a data-url="http://jason0853.github.io/2018/01/23/Using-design-pattern-to-refactory-jQuery-spaghetti-code/" data-id="cjvt7eh0j0041gfuwewaivypk" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>


                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="https://twitter.com/js0853" target="_blank">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="https://www.facebook.com/js0853" target="_blank">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/jason0853" target="_blank">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/" target="_blank">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    <div class="github-card" data-github="jason0853" data-width="100%" data-height="" data-theme="default"></div>
    <script src="//cdn.jsdelivr.net/github-cards/latest/widget.js"></script>
    
        
<nav id="article-nav">
    
        <a href="/2018/02/02/Functional-Programming/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            Functional Programming
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2018/01/19/merge-vs-rebase/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">merge vs rebase</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Front-end/">Front-end</a><span class="category-list-count">12</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Front-end/Javascript/">Javascript</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Front-end/React/">React</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Front-end/Typescript/">Typescript</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ops/">Ops</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ops/Docker/">Docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ops/Git/">Git</a><span class="category-list-count">5</span></li></ul></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/Algorithm/" style="font-size: 18px;">Algorithm</a> <a href="/tags/Design-Pattern/" style="font-size: 14px;">Design Pattern</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/ES6/" style="font-size: 10px;">ES6</a> <a href="/tags/Immer/" style="font-size: 10px;">Immer</a> <a href="/tags/Javascript/" style="font-size: 20px;">Javascript</a> <a href="/tags/React/" style="font-size: 14px;">React</a> <a href="/tags/Redux/" style="font-size: 10px;">Redux</a> <a href="/tags/Sass/" style="font-size: 10px;">Sass</a> <a href="/tags/Spritesmith/" style="font-size: 10px;">Spritesmith</a> <a href="/tags/Typescript/" style="font-size: 14px;">Typescript</a> <a href="/tags/git/" style="font-size: 16px;">git</a> <a href="/tags/jQuery/" style="font-size: 12px;">jQuery</a> <a href="/tags/tsconfig/" style="font-size: 12px;">tsconfig</a>
        </div>
    </div>


            
                
    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/08/15/React-Basic/" class="thumbnail">
    
    
        <span style="background-image:url(../../../../images/react/react-logo.png)" alt="React Basic" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Front-end/">Front-end</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Front-end/React/">React</a></p>
                            <p class="item-title"><a href="/2018/08/15/React-Basic/" class="title">React Basic</a></p>
                            <p class="item-date"><time datetime="2018-08-15T05:51:56.000Z" itemprop="datePublished">2018-08-15</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/05/28/Config-create-react-app-with-sass-and-spritesmith/" class="thumbnail">
    
    
        <span style="background-image:url(../../../../images/react/react-logo.png)" alt="Config create-react-app with sass and spritesmith" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Front-end/">Front-end</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Front-end/React/">React</a></p>
                            <p class="item-title"><a href="/2018/05/28/Config-create-react-app-with-sass-and-spritesmith/" class="title">Config create-react-app with sass and spritesmith</a></p>
                            <p class="item-date"><time datetime="2018-05-28T05:58:57.000Z" itemprop="datePublished">2018-05-28</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/05/12/React-and-Redux-with-Typescript/" class="thumbnail">
    
    
        <span style="background-image:url(../../../../images/react/react-logo.png)" alt="React and Redux with Typescript" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Front-end/">Front-end</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Front-end/React/">React</a></p>
                            <p class="item-title"><a href="/2018/05/12/React-and-Redux-with-Typescript/" class="title">React and Redux with Typescript</a></p>
                            <p class="item-date"><time datetime="2018-05-12T08:06:26.000Z" itemprop="datePublished">2018-05-12</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/04/23/Docker-Basic/" class="thumbnail">
    
    
        <span style="background-image:url(../../../../images/docker/docker-logo.png)" alt="Docker Basic" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Ops/">Ops</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Ops/Docker/">Docker</a></p>
                            <p class="item-title"><a href="/2018/04/23/Docker-Basic/" class="title">Docker Basic</a></p>
                            <p class="item-date"><time datetime="2018-04-23T04:36:13.000Z" itemprop="datePublished">2018-04-23</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/03/24/2018-kakao-blind-recruitment-round-1-7/" class="thumbnail">
    
    
        <span style="background-image:url(../../../../images/algorithm/2018-kakao-blind-recruitment-logo.png)" alt="2018 카카오 코딩 테스트 (추석 트래픽)" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/03/24/2018-kakao-blind-recruitment-round-1-7/" class="title">2018 카카오 코딩 테스트 (추석 트래픽)</a></p>
                            <p class="item-date"><time datetime="2018-03-24T14:01:32.000Z" itemprop="datePublished">2018-03-24</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
        
    </div>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 광고 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3546887837495101"
     data-ad-slot="6861569823"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</aside>
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2019 Jason Lee</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_shortname = 'jason0853';
    
    
    var disqus_url = 'http://jason0853.github.io/2018/01/23/Using-design-pattern-to-refactory-jQuery-spaghetti-code/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
