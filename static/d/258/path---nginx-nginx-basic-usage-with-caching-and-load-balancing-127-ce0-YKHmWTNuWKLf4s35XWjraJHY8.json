{"data":{"site":{"siteMetadata":{"title":"jason.log","author":"Jaesung Lee","siteUrl":"https://jason0853.github.io","comment":{"disqusShortName":"","utterances":"jason0853/gatsby-blog"},"sponsor":{"buyMeACoffeeId":"HFzVClS"}}},"markdownRemark":{"id":"b05882aa-8168-51b9-b224-4cee031ece38","excerpt":"ì§€ê¸ˆê¹Œì§€ íšŒì‚¬ì—ì„œì˜ ì—…ë¬´ëŠ” DevOps Engineerê°€ ìë™í™” ì‹œì¼œë†“ì€ ì‹œìŠ¤í…œ ì•ˆì— í”„ë¡ íŠ¸ ê´€ë ¨ ë¦¬ì†ŒìŠ¤ë¥¼ ì €ì¥ì†Œì— ì˜®ê¸°ëŠ” ê²ƒì´ ì—…ë¬´ì˜ ë§ˆì¹¨í‘œì˜€ë‹¤. í•˜ì§€ë§Œ ë‚œ ì—…ë¬´ ì˜ì—­ì„ ì¢€ ë” í™•ì¥ì‹œí‚¤ê³  ì‹¶ë‹¤.\nìì‹ ì´ ì§  ì½”ë“œëŠ” ì§ì ‘ ì„œë²„ì— ë°°í¬í•˜ê³  ê´€ë¦¬í•´ì•¼í•œë‹¤ëŠ”ê²Œ ë‚˜ì˜ ìƒê°ì´ë‹¤. Nginxë€?ìœ„í‚¤ë°±ê´€ì—ì„œ Nginxë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì†Œê°œí•œë‹¤.ì›¹ ì„œë²„ ì†Œí”„íŠ¸ì›¨ì–´ë¡œ, ê°€ë²¼ì›€ê³¼ ë†’ì€ ì„±ëŠ¥ì„ ëª©í‘œë¡œ í•œë‹¤. ì›¹ ì„œë²„, ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ë° ë©”ì¼ í”„ë¡ì‹œ ê¸°ëŠ¥ì„ ê°€ì§„ë‹¤.Apacheâ€¦","html":"<p>ì§€ê¸ˆê¹Œì§€ íšŒì‚¬ì—ì„œì˜ ì—…ë¬´ëŠ” DevOps Engineerê°€ ìë™í™” ì‹œì¼œë†“ì€ ì‹œìŠ¤í…œ ì•ˆì— í”„ë¡ íŠ¸ ê´€ë ¨ ë¦¬ì†ŒìŠ¤ë¥¼ ì €ì¥ì†Œì— ì˜®ê¸°ëŠ” ê²ƒì´ ì—…ë¬´ì˜ ë§ˆì¹¨í‘œì˜€ë‹¤. í•˜ì§€ë§Œ ë‚œ ì—…ë¬´ ì˜ì—­ì„ ì¢€ ë” í™•ì¥ì‹œí‚¤ê³  ì‹¶ë‹¤.\n<strong>ìì‹ ì´ ì§  ì½”ë“œëŠ” ì§ì ‘ ì„œë²„ì— ë°°í¬í•˜ê³  ê´€ë¦¬í•´ì•¼í•œë‹¤ëŠ”ê²Œ</strong> ë‚˜ì˜ ìƒê°ì´ë‹¤.</p>\n<h2 id=\"i-classdevicon-nginx-original-colored-stylefont-size-13remi-nginxë€\"><a href=\"#i-classdevicon-nginx-original-colored-stylefont-size-13remi-nginx%EB%9E%80\" aria-label=\"i classdevicon nginx original colored stylefont size 13remi nginxë€ permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><i class=\"devicon-nginx-original colored\" style=\"font-size: 1.3rem;\"></i> Nginxë€?</h2>\n<p><a href=\"https://ko.wikipedia.org/wiki/Nginx\">ìœ„í‚¤ë°±ê´€</a>ì—ì„œ <strong>Nginx</strong>ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì†Œê°œí•œë‹¤.</p>\n<blockquote>\n<p>ì›¹ ì„œë²„ ì†Œí”„íŠ¸ì›¨ì–´ë¡œ, ê°€ë²¼ì›€ê³¼ ë†’ì€ ì„±ëŠ¥ì„ ëª©í‘œë¡œ í•œë‹¤. ì›¹ ì„œë²„, ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ë° ë©”ì¼ í”„ë¡ì‹œ ê¸°ëŠ¥ì„ ê°€ì§„ë‹¤.</p>\n</blockquote>\n<p><strong>Apache</strong>ë¼ëŠ” ìœ ëª…í•œ ì›¹ì„œë²„ê°€ ìˆì§€ë§Œ ëŒ€ìš©ëŸ‰ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ”ë° ìˆì–´ì„œ ì›¹ì„œë²„ë¡œì„œì˜ í•œê³„ë¥¼ ë“œëŸ¬ëƒˆë‹¤. ê·¸ë¦¬í•˜ì—¬ ë“±ì¥í•œê²Œ <strong>Nginx</strong>ì´ë‹¤. <strong>Nginx</strong>ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Event-Driven ë°©ì‹ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©° ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ ë‚´ë¶€ì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì‘ì—…ë“¤ì„ ì²˜ë¦¬í•œë‹¤.</p>\n<h3 id=\"ì„¤ì¹˜\"><a href=\"#%EC%84%A4%EC%B9%98\" aria-label=\"ì„¤ì¹˜ permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì„¤ì¹˜</h3>\n<p>ë§¥OS ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±í•˜ê² ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ brew <span class=\"token function\">install</span> nginx\n$ nginx -v\n$ nginx\n$ nginx -s reload\n$ nginx -s stop</code></pre></div>\n<ul>\n<li><code class=\"language-text\">Homebrew</code>ë¥¼ í†µí•˜ì—¬ <code class=\"language-text\">Nginx</code>ë¥¼ ì„¤ì¹˜í•œë‹¤.</li>\n<li><code class=\"language-text\">nginx -v</code> - nginx ë²„ì „ í™•ì¸</li>\n<li><code class=\"language-text\">nginx</code> - ì„œë²„ ì‹œì‘</li>\n<li><code class=\"language-text\">nginx -s reload</code> - ì„œë²„ ì¬ì‹œì‘</li>\n<li><code class=\"language-text\">nginx -s stop</code> - ì„œë²„ ì¤‘ì§€</li>\n</ul>\n<p>ì„œë²„ë¥¼ ì‹œì‘í•˜ê³  ë‚˜ì„œ <a href=\"http://localhost:8080/\">localhost:8080</a>ì„ ì ‘ì†í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì´ ë‚˜ì˜¬ê²ƒì´ë‹¤.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cb7363bba4fdca75f286ab2b4b935f4b/d67c3/nginx-basic-usage-with-caching-and-load-balancing-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 60.84840055632823%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVQoz7WS70+CQBzG76/IMAmjdK61Obde9Be61NlagvxQ+6Nwq8bGIl61Gi/IFyHHeLoDaUlSzerZPnuO43vPlzuONJsyjtsddE7P0DppY//gCJWqiGpNgsDZk9i4ns7tCLWUiiBmsDlRkiEfNrDL1tXlBohuTmBOr2FMZplPZ1DGOrrnffQGQwyGF+j2+ri8UqBqBhRNx0jV3lHZ81g3MGLvNMMEQYlc14XjOPA8D7Z9hzB8xU9E4jhGDl15FEUsxIZlWZjPLdze3MN7eMTz0wKLl5DVUFC6GZIkCT7CxT0IAvi+n/pySVkT3ozXpBUorsv5tOU8tFzrjYtONoWVdc9YD/0ycFv9b+D3Z7bFF/5lKCn+qd+E8Tv8BtZIaUj5W+g0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"nginx basic usage with caching and load balancing 1\"\n        title=\"\"\n        src=\"/static/cb7363bba4fdca75f286ab2b4b935f4b/b9e4f/nginx-basic-usage-with-caching-and-load-balancing-1.png\"\n        srcset=\"/static/cb7363bba4fdca75f286ab2b4b935f4b/cf440/nginx-basic-usage-with-caching-and-load-balancing-1.png 148w,\n/static/cb7363bba4fdca75f286ab2b4b935f4b/d2d38/nginx-basic-usage-with-caching-and-load-balancing-1.png 295w,\n/static/cb7363bba4fdca75f286ab2b4b935f4b/b9e4f/nginx-basic-usage-with-caching-and-load-balancing-1.png 590w,\n/static/cb7363bba4fdca75f286ab2b4b935f4b/f9b6a/nginx-basic-usage-with-caching-and-load-balancing-1.png 885w,\n/static/cb7363bba4fdca75f286ab2b4b935f4b/2d849/nginx-basic-usage-with-caching-and-load-balancing-1.png 1180w,\n/static/cb7363bba4fdca75f286ab2b4b935f4b/bbefa/nginx-basic-usage-with-caching-and-load-balancing-1.png 1770w,\n/static/cb7363bba4fdca75f286ab2b4b935f4b/d67c3/nginx-basic-usage-with-caching-and-load-balancing-1.png 2876w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>ì ‘ì† ì„±ê³µ!ğŸ‘ğŸ‘</p>\n<h3 id=\"í™˜ê²½-ì„¤ì •\"><a href=\"#%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95\" aria-label=\"í™˜ê²½ ì„¤ì • permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í™˜ê²½ ì„¤ì •</h3>\n<p><strong>Nginx</strong>ì˜ ëª¨ë“  í™˜ê²½ ì„¤ì •ì€ ì•„ë˜ ê²½ë¡œ í´ë”ì— ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cd</span> /usr/local/etc/nginx <span class=\"token operator\">&amp;&amp;</span> code <span class=\"token keyword\">.</span></code></pre></div>\n<p><code class=\"language-text\">/usr/local/etc/nginx</code> ìœ„ì¹˜ë¡œ ì´ë™í•´ì„œ VSCode ì—ì„œ í´ë”ë¥¼ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ íŒŒì¼ë“¤ì´ ì¡´ì¬í•œë‹¤. ê·¸ ì¤‘ì—ì„œë„ <em>nginx.conf</em> íŒŒì¼ì„ ì‚´í´ë³´ì.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3e9336d11af2e7738aa0af516f0a2af5/74a01/nginx-basic-usage-with-caching-and-load-balancing-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 464px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 168.10344827586206%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAYAAABfqvm9AAAACXBIWXMAABYlAAAWJQFJUiTwAAAE7ElEQVRIx5VV2XLiVhTkC/KSqlTGgAR4ASQQiyQkoQ0EiH0xxsb2bM4kqbxMTSZVeclTKr+QH+6cc20RbDye5KHrCsE99OmzdEqp2DCtHuaLLVbn11isrlGteTgrmSgpLRTL/w8pre7DcmIsV7cYTD9gMLoPeFo0KahFP7KgVBxC+z8h5XcuMJq8RxS/w99/WPj90x3WV5/w9u4z3rz/jJs3nzCk7wejt4R34uwPv4yU4y3Qi2/QHdziz18H+O3jj5gsPmC1/oDzzU+YLe/ghRdw3CUcb4U2IehsEHQvCZsDpPKFKuR8BbnMKb4xXuNVY4LA7SDsThB2xjBbIWwnQq8/Q38wRzea4OS0jhzd4bt5viugijNVONaQ4y/kMmRzjHwtRKNuw6BAlt2F6w1EUMMMBHTdFxfTmRIyWYJU/jc4YRewIBVx5N+gYBMLv0+M5ugTnHZPIOpNBUM/iAlDLJZXmEwvMIgXKCsm5Jz6OGA+p0CqRcipLrRqC/WmB8MIBEudzqZOn80QTXpfb7iCrdnqiM/HJ7Udy1ReBNRQyBzj2+1fkIY/ox9EiMfniOnfo2gK348Fk6pm4yhdhCQrlG5ZpJzdS1lomN/TMG0tIde6qCg6XXbQoH9vkmacEgc7Oa2J1PiinKuAs0u02zHc1zDtXqJgzRBHI4xJnxGx5Op2umPBcDhaYX1xixVN03xxiVrdEWyToHsp3zPMGhPkKsSo1ICitqARK9aqWGoKlsWSLt7fwxQM9yt8WGVvK6o8Hkzhkm7xcIm22xdacaoMZpRgX7uDgMwwwwyrARRiWCobxMrA6VnjEYOneJmheyU0ZIYeMWTNuP/4h5KsPsvoKR4xzJpTyJUAarkJtWoJhqzbWbEhzv2qfpVh/qHKORq/KBjQBlqLyvJ0zOYbMRkcmPVMNOTWeUFDmsvWApLWgUIMK1ThEjFUK5Z4LlNVS2VdtAr3JL9nfQ8YJm2To4CStcBpc0CT0sdktMRoMMOwP8V8co4poUNTc05bfbnaijlWKy2h7UHKGRq9tlzAtrvCsBVhWzrD60YDV6qK62oVb0wDv2gKbPkERxRA3qWsHqZ8TAGPCjVEWQnx+Ueo4RaXrocflmuswx6WXgebeIo7CuqmJXwvUS/S/CYT8mxRZHpQ5CJ6RhcRVXetabi2HCyrNYGNbuLabKHrdGDS9uEtVKu3D8Zup2H+QcPv7DXSzRh2OyLD2sD2h9CdHtzuFKYXoze4n+cx6WnSKstKypf7kBs7276AXO9Dr1uw7QhlqiqzadHGdogZFyGdKYrVxcV4cZbv22aOHC1Zy/TFHPO0hJ0RgnAoTl4UYu0/gHdhouPB+koaW6KUjYYtlgPr1LI6wgLYW3hrB+FINHtIJ5vXywzNGXLU2EazLWaY1z/7BwfkrcML1/X6wg3Z/ViOl0fPu4JskHU2HJEuX+KpYAvgz/wnvCNfHZ3tRvDr60sjIyIb5VRZNz45NbZSfq5QW3FhuMJPgz72ZWboX5M3T2CbpBWlxYx0wxcWwOj1ZiL4hBbHdEYWQS3EciQTc7i+9DEtWF/YqE4V5TS5sglDRr3R3hm/ZXWFFTyfsnSGdHALiXZi6EXwqYrcvNw+97ZZEv2XpJrYaLIcDlNmo6+GyJVt1DRLFEOr2aKZX7KA54vC0R+C5kmP7J4RPRX9a8H/AaxrMoZse0LJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"nginx basic usage with caching and load balancing 2\"\n        title=\"\"\n        src=\"/static/3e9336d11af2e7738aa0af516f0a2af5/74a01/nginx-basic-usage-with-caching-and-load-balancing-2.png\"\n        srcset=\"/static/3e9336d11af2e7738aa0af516f0a2af5/cf440/nginx-basic-usage-with-caching-and-load-balancing-2.png 148w,\n/static/3e9336d11af2e7738aa0af516f0a2af5/d2d38/nginx-basic-usage-with-caching-and-load-balancing-2.png 295w,\n/static/3e9336d11af2e7738aa0af516f0a2af5/74a01/nginx-basic-usage-with-caching-and-load-balancing-2.png 464w\"\n        sizes=\"(max-width: 464px) 100vw, 464px\"\n      />\n  </span>\n  </a></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token keyword\">http</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">server</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">listen</span>       <span class=\"token number\">8080</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">server_name</span>  localhost<span class=\"token punctuation\">;</span></span>\n        <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">root</span>   html<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">index</span>  <span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>html <span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>htm<span class=\"token punctuation\">;</span></span>        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">error_page</span>   <span class=\"token number\">500</span> <span class=\"token number\">502</span> <span class=\"token number\">503</span> <span class=\"token number\">504</span>  <span class=\"token operator\">/</span><span class=\"token number\">50</span>x<span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">location</span> <span class=\"token operator\">=</span> <span class=\"token operator\">/</span><span class=\"token number\">50</span>x<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">root</span>   html<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">include</span> servers<span class=\"token operator\">/</span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>nginx.conf íŒŒì¼ì—ì„œ <code class=\"language-text\">server</code> ë¸”ëŸ­ ì•ˆì— ìˆëŠ” ëª‡ ì¤„ì˜ ì½”ë“œë¥¼ ì‚´í´ë³´ê² ë‹¤.</p>\n<ul>\n<li><code class=\"language-text\">listen 8080</code> - í¬íŠ¸ ì„¤ì •</li>\n<li><code class=\"language-text\">server_name</code> - ì„œë²„ ë„¤ì„ ì„¤ì •</li>\n<li>\n<p><code class=\"language-text\">location</code> - ë£¨íŠ¸ ê²½ë¡œ ì§€ì •</p>\n<ul>\n<li><code class=\"language-text\">root</code> - html í´ë”ëŠ” ìƒëŒ€ ê²½ë¡œë¡œì„œ ì»´íŒŒì¼ íƒ€ì„ì— ì„¤ì •ëœë‹¤. <a href=\"https://stackoverflow.com/questions/39835855/location-of-the-nginx-default-index-html-file-on-mac-os/39836193\">ì°¸ê³ </a>\nhtml í´ë”ëŠ” ì‹¬ë³¼ë¦­ ë§í¬ë¡œ ì—°ê²°ë˜ì–´ ë³¸ë˜ ìœ„ì¹˜ëŠ” <em>/usr/local/var/www</em> í´ë” í•˜ìœ„ì— index.html ë° 50x.html íŒŒì¼ë“¤ì´ ìœ„ì¹˜í•´ìˆë‹¤.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">include</code> - í•„ìš”í•œ ì„œë²„ conf íŒŒì¼ ê²½ë¡œ ìœ„ì¹˜ ì§€ì •</li>\n</ul>\n<h3 id=\"ë¦¬ì•¡íŠ¸-ì›¹ì„œë²„-ë„ìš°ê¸°\"><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%9B%B9%EC%84%9C%EB%B2%84-%EB%9D%84%EC%9A%B0%EA%B8%B0\" aria-label=\"ë¦¬ì•¡íŠ¸ ì›¹ì„œë²„ ë„ìš°ê¸° permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¦¬ì•¡íŠ¸ ì›¹ì„œë²„ ë„ìš°ê¸°</h3>\n<p>CRAë¥¼ í†µí•´ ë¦¬ì•¡íŠ¸ ì›¹ì„ ë¹ ë¥´ê²Œ êµ¬í˜„í•˜ì—¬ ë¹Œë“œí•œ ì†ŒìŠ¤ë¥¼ nginx ì„œë²„ë‘ ì—°ë™ì‹œì¼œë³´ê² ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ npx create-react-app nginx-react-app <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">cd</span> nginx-react-app\n$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> react-router-dom</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//App.js</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> BrowserRouter <span class=\"token keyword\">as</span> Router<span class=\"token punctuation\">,</span> Route<span class=\"token punctuation\">,</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n<span class=\"token keyword\">import</span> Logo <span class=\"token keyword\">from</span> <span class=\"token string\">'./react-logo.png'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Index</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>Home<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>Logo<span class=\"token punctuation\">}</span> alt<span class=\"token operator\">=</span><span class=\"token string\">\"logo\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">About</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>About<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Users</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>Users<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">AppRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Router<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>nav<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>li<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token string\">\"/\"</span><span class=\"token operator\">></span>Home<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>li<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token string\">\"/about/\"</span><span class=\"token operator\">></span>About<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>li<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token string\">\"/users/\"</span><span class=\"token operator\">></span>Users<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>nav<span class=\"token operator\">></span>\n\n        <span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">\"/\"</span> exact component<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>Index<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">\"/about/\"</span> component<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>About<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">\"/users/\"</span> component<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>Users<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Router<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> AppRouter</code></pre></div>\n<p><code class=\"language-text\">react-router-dom</code> íŒ¨í‚¤ì§€ë¥¼ ì¶”ê°€í•˜ì—¬ ê°„ë‹¨í•œ í˜ì´ì§€ ì›¹ì„ êµ¬í˜„í•´ë³´ì•˜ë‹¤. ì´ì œ <code class=\"language-text\">yarn build</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ <code class=\"language-text\">build</code> í´ë”ë¥¼ nginxì—ì„œ í™˜ê²½ì„¤ì •í•œë‹¤.</p>\n<p>nginx.conf íŒŒì¼ì—ì„œ í™˜ê²½ì„¤ì •ì„ ì§ì ‘ ìˆ˜ì •í•  ìˆ˜ë„ ìˆê² ì§€ë§Œ í•„ìš”í•œ ì„œë²„ë§ˆë‹¤ conf íŒŒì¼ì„ ë”°ë¡œ ë§Œë“¤ì–´ include í•´ì„œ ì“°ëŠ”ê²Œ ë” ë‚˜ì€ ë°©ì‹ì¸ ê²ƒ ê°™ë‹¤. 1.10.x ì´ì „ ë²„ì „ê¹Œì§€ëŠ” site-available í´ë”ì— í•„ìš”í•œ conf íŒŒì¼ì„ ë§Œë“¤ì–´ site-enabled í´ë” ì•„ë˜ì— ì‹¬ë³¼ë§ ë§í¬ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í–ˆì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">ln</span> -s /usr/local/etc/nginx/sites-available/default.conf /usr/local/etc/nginx/sites-enabled</code></pre></div>\n<p>ìœ„ ëª…ë ¹ì–´ëŠ” ì‹¬ë³¼ë§ ë§í¬ ìƒì„±í•˜ëŠ” ì˜ˆì œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cd</span> /usr/local/etc/nginx/servers <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">touch</span> default.conf <span class=\"token operator\">&amp;&amp;</span> code <span class=\"token keyword\">.</span></code></pre></div>\n<p>servers í´ë” ì•„ë˜ì— default.conf íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token keyword\">server</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">listen</span>       <span class=\"token number\">7777</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">server_name</span>  localhost<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">root</span>   <span class=\"token operator\">/</span>Users<span class=\"token operator\">/</span>jason<span class=\"token operator\">/</span>Desktop<span class=\"token operator\">/</span>nginx<span class=\"token operator\">-</span>react<span class=\"token operator\">-</span>app<span class=\"token operator\">/</span>build<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">index</span>  <span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>html <span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>htm<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">try_files</span> <span class=\"token variable\">$uri</span> <span class=\"token operator\">/</span><span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">try_files</code> - react, vue, angular ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° í”„ë ˆì„ì›Œí¬ë¥¼ ì´ìš©í•˜ì—¬ ê°œë°œí•  ê²½ìš° ëŒ€ë¶€ë¶„ Single Page Application(index.htmlì„ ê¸°ë°˜ìœ¼ë¡œ ë‚´ë¶€ ëª¨ë“ˆì„ êµì²´í•˜ëŠ” ë°©ì‹)ìœ¼ë¡œ ê°œë°œì„ ì§„í–‰í•˜ëŠ”ê²Œ íŠ¸ë Œë“œì´ë‹¤. ì´ì™€ ê°™ì´ ê°œë°œì„ ì§„í–‰í•  ê²½ìš° ë¹Œë“œí•œ íŒŒì¼ì„ \bì‚°ì¶œí•˜ì—¬ ì›¹ì„œë²„ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•  ë•Œ 404 ì—ëŸ¬ê°€ ì¼ì–´ë‚  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ urlë¡œ <a href=\"http://localhost:7777/about/\">/about</a>ì´ë‚˜ <a href=\"http://localhost:7777/users/\">/users</a>ë¡œ ì§ì ‘ ì ‘ê·¼í•˜ê±°ë‚˜ ë¦¬í”„ë ˆì‰¬ í•  ê²¨ìš° 404 ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. í•´ê²°ì±…ì€ ìš”ì²­í•œ urië¥¼ ë¬´ì‹œí•˜ê³  index.html íŒŒì¼ì„ ì œê³µí•˜ëŠ” ê²ƒì´ë‹¤.</li>\n</ul>\n<p>ìœ„ì™€ ê°™ì´ ì‘ì„±í•œ ë’¤ nginxë¥¼ ì¬ì‹œì‘í•˜ê³  <a href=\"http://localhost:7777/\">localhost:7777</a>ì— ì ‘ì†í•´ë³´ì.</p>\n<p><img src=\"/nginx-basic-usage-with-caching-and-load-balancing-3-f7ab1c240d7e7dd2ab8c262b626fad7e.gif\"></p>\n<p>ìœ„ì™€ ê°™ì´ ë‚˜ì˜¨ë‹¤ë©´ ì„±ê³µ!! ğŸ‘ğŸ‘</p>\n<h3 id=\"ìºì‹±\"><a href=\"#%EC%BA%90%EC%8B%B1\" aria-label=\"ìºì‹± permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ìºì‹±</h3>\n<p><strong>ìºì‹±</strong>ì€ ì •ë§ ì¤‘ìš”í•˜ë‹¤. ì‚¬ìš©ìê°€ ì´ë¯¸ ì ‘ì†í•œ ì‚¬ì´íŠ¸ì˜ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë³€ê²½ì´ ì—†ë‹¤ë©´ ë¸Œë¼ìš°ì €ì—ì„œ êµ³ì´ ë‹¤ì‹œ ë‹¤ìš´ë¡œë“œ ë°›ì§€ ì•Šê³  ê¸°ì¡´ì— ë¡œì»¬ì— ì €ì¥ë˜ì–´ ìˆëŠ” ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ì—¬ í›¨ì”¬ ë” ë¹ ë¥¸ ì‚¬ì´íŠ¸ì— ì ‘ì†ì„ í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ê¸°ì¡´ì— ì‘ì„±í–ˆë˜ default.conf íŒŒì¼ì— <code class=\"language-text\">location</code> ë¸”ë¡ êµ¬ë¬¸ì„ ì¶”ê°€í•´ë³´ì.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token keyword\">server</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">listen</span>       <span class=\"token number\">7777</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">server_name</span>  localhost<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">root</span>   <span class=\"token operator\">/</span>Users<span class=\"token operator\">/</span>jason<span class=\"token operator\">/</span>Desktop<span class=\"token operator\">/</span>test<span class=\"token operator\">/</span>build<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">index</span>  <span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>html <span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>htm<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try_files</span> <span class=\"token variable\">$uri</span> <span class=\"token operator\">/</span><span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">location</span> <span class=\"token operator\">~</span><span class=\"token operator\">*</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>ico<span class=\"token operator\">|</span>jpg<span class=\"token operator\">|</span>png<span class=\"token operator\">|</span>gif<span class=\"token operator\">|</span>jpeg<span class=\"token operator\">|</span>swf<span class=\"token operator\">|</span>woff<span class=\"token operator\">|</span>css<span class=\"token operator\">|</span>js<span class=\"token punctuation\">)</span>$ <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">root</span> <span class=\"token operator\">/</span>Users<span class=\"token operator\">/</span>jason<span class=\"token operator\">/</span>Desktop<span class=\"token operator\">/</span>test<span class=\"token operator\">/</span>build<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">expires</span> <span class=\"token number\">1</span>M<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">add_header</span> Cache<span class=\"token operator\">-</span>Control <span class=\"token string\">\"public\"</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">expires</code> - ë§Œë£Œê¸°í•œ ì§€ì • (ì´ˆ - s / ì¼ - d / ì›” - M / ë…„ - y), cache ë„ê¸° <code class=\"language-text\">epoch</code> ë¡œ ì„¤ì •í•œë‹¤.</li>\n<li><code class=\"language-text\">add_header</code> - í—¤ë” ì§€ì •.</li>\n</ul>\n<p>í•˜ì´ë¼ì´íŠ¸ ëœ ì½”ë“œ ë¶€ë¶„ì„ ì¶”ê°€í•œ ë’¤ nginx ì„œë²„ë¥¼ ì¬ì‹œì‘í•´ë³´ì.\n<code class=\"language-text\">nginx -s reload</code></p>\n<p>ê·¸ë¦¬ê³  ë‚˜ì„œ ê°œë°œì ë„êµ¬ë¥¼ ì—´ì–´ ë„¤íŠ¸ì›Œí¬ íƒ­ìª½ì„ í•œë²ˆ ì‚´í´ë³´ì.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bf5b9b2db39162fc825da6f212013b58/af071/nginx-basic-usage-with-caching-and-load-balancing-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 68.16608996539793%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACiklEQVQ4y21TS0/UUBhtdKEr44IoDCZ0Zvq+bW/f7cz04cAgRoUQFIVEND6ihA1qQlwYNy5d+oeP33ehCgmLM+d+nd7T73E+bavrMJlO0XZzBEEAwzSRFBVmsxnatsWU/yOu61o96+j9/szMcVEUSJIEeZ5D66oKMorg+QGCMERRklizjrZpMZ/PSXCGGV1sWxKiZw3hf9yQWIksy5CmqYImQgnH9VBVE3WhoA843RSGH8Kl57ZtQ/g+LMtWsUWxJwRsT9A9Fy7FPlVmO656V5OBgGuNEAWugvQduMKE55gQtoHxeIzhcEhiroLneYodzycRBz5BxcQM7fHLT7Cn2xjITSwHG1gJF1il80A+gp4sEFIbWFRKqfrEZTFH1CafMue+98zQdo9/4V51hLvJIe7EB7jl7eGmtYMb9i5um1uI45jaUZFArEp3OUOCEL4qlctXZ5oBt0R7+/EYeb0JWcxhyyl0J8WanWCN2ZRKsOXmzwpElBn3yTDOW2GSI/h8mbWT969RFzGywEHCvRutwh0O4BEcfRUpTbAh2xRlCRknCgENUlBGLNKDP8CsHfz8A3n0A9b+GYwXZ1je/oqlJ6dYevYN9xcfUJK31jvy4WSCkMvjQVxMtxe5Inj4/TfyV6dwd44xWH+DFcIyY+MdBvVzbEQB9psK22WKp3mMzVBg4dvIzTFG1wl+OfmMIg4gTF2V6A4f/INN4GnWtBUlGThNMxjcOxYhHl/wFcGHtA1sbItKsexLIKMalqWGwtuTZjkyEuVp8lRZ4NqS+UfXdYxGI2Vg5h4cn9tmogQTyjCioTCzhXqhcc8EjZecd5EXfEKNZ+PykvO5N3NDtsk5O/KdUCYOFfd2uYy/LXu1b8bQwu8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"nginx basic usage with caching and load balancing 4\"\n        title=\"\"\n        src=\"/static/bf5b9b2db39162fc825da6f212013b58/b9e4f/nginx-basic-usage-with-caching-and-load-balancing-4.png\"\n        srcset=\"/static/bf5b9b2db39162fc825da6f212013b58/cf440/nginx-basic-usage-with-caching-and-load-balancing-4.png 148w,\n/static/bf5b9b2db39162fc825da6f212013b58/d2d38/nginx-basic-usage-with-caching-and-load-balancing-4.png 295w,\n/static/bf5b9b2db39162fc825da6f212013b58/b9e4f/nginx-basic-usage-with-caching-and-load-balancing-4.png 590w,\n/static/bf5b9b2db39162fc825da6f212013b58/f9b6a/nginx-basic-usage-with-caching-and-load-balancing-4.png 885w,\n/static/bf5b9b2db39162fc825da6f212013b58/2d849/nginx-basic-usage-with-caching-and-load-balancing-4.png 1180w,\n/static/bf5b9b2db39162fc825da6f212013b58/af071/nginx-basic-usage-with-caching-and-load-balancing-4.png 1734w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>ë¹¨ê°„ ë°•ìŠ¤ ë¶€ë¶„ì„ ë³´ë©´ default.confì—ì„œ ì„¤ì •í•œ 1ë‹¬ ë§Œë£Œê¸°í•œ(60*60*24*30)ê³¼ <code class=\"language-text\">public</code>ì´ <code class=\"language-text\">Cache-Control</code>ì— ì¶”ê°€ë˜ì–´ìˆë‹¤.</p>\n<h3 id=\"ë¡œë“œë°¸ëŸ°ì‹±\"><a href=\"#%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%8B%B1\" aria-label=\"ë¡œë“œë°¸ëŸ°ì‹± permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¡œë“œë°¸ëŸ°ì‹±</h3>\n<p><strong>ë¡œë“œë°¸ëŸ°ì‹±</strong>ì´ë€ ì„œë²„ë¥¼ ì—¬ëŸ¬ëŒ€ ë‘ì–´ ë¶„ì‚° ì²˜ë¦¬í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.\nNginxì—ëŠ” <code class=\"language-text\">upstream</code>ì´ë¼ëŠ” ë‚´ì¥ëœ ëª¨ë“ˆì„ ì œê³µí•˜ëŠ”ë° ì´ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ë¶€í•˜ ë¶„ì‚° ë° ì†ë„ ê°œì„ ì„ í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ìš°ì„  Koa í”„ë ˆì„ì›Œí¬ë¥¼ ì´ìš©í•˜ì—¬ ê°„ë‹¨í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‘ì„±í•´ë³´ê² ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> app <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">cd</span> app\n$ <span class=\"token function\">yarn</span> init -y\n$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> koa koa-logger\n$ <span class=\"token function\">mkdir</span> src <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">cd</span> src <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">touch</span> index.js</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> Koa <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'koa'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'koa-logger'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Koa</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">PORT</span> <span class=\"token operator\">||</span> <span class=\"token number\">3000</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">logger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ctx</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  ctx<span class=\"token punctuation\">.</span>body <span class=\"token operator\">=</span> <span class=\"token string\">'Hello World'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`Server is running on port </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">PORT</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>index.jsë¥¼ ìœ„ì™€ ê°™ì´ ì‘ì„±í•œë‹¤.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"app\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"index.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MIT\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"koa\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.7.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"koa-accesslog\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.0.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"koa-logger\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.2.0\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token property\">\"start:1\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node src\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token property\">\"start:2\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"PORT=3001 node src\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token property\">\"start:3\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"PORT=3002 node src\"</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>package.json íŒŒì¼ì„ ì—´ì–´ í•˜ì´ë¼ì´íŠ¸ëœ ë¶€ë¶„ì„ copy&#x26;paste í•˜ì.</p>\n<p>ì´ì œ ë¡œë“œë°¸ëŸ°ì‹±ì„ ìœ„í•œ confë¥¼ ì‘ì„±í•´ë³´ì.</p>\n<p>ë‹¤ì‹œ nginx servers í´ë”ë¡œ ì´ë™í•´ì„œ app.conf íŒŒì¼ í•˜ë‚˜ë¥¼ ìƒì„±í•œë‹¤. ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">upstream</span> app <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  least_conn<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">server</span>  <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token punctuation\">:</span><span class=\"token number\">3000</span> weight<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">server</span>  <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token punctuation\">:</span><span class=\"token number\">3001</span> weight<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">server</span>  <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token punctuation\">:</span><span class=\"token number\">3002</span> weight<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span>\n<span class=\"token keyword\">server</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">listen</span> <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">proxy_pass</span> <span class=\"token keyword\">http</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>app<span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">upstream</code> - ì—¬ëŸ¬ ì„œë²„ê°€ ìˆœì°¨ì ìœ¼ë¡œ ì¼ì„ í•  ê²½ìš° ì„œë¹„ìŠ¤ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì„œë²„</p>\n<ul>\n<li><code class=\"language-text\">weight</code> - ì„œë²„ ê°€ì¤‘ì¹˜ ì„¤ì •</li>\n</ul>\n</li>\n<li><code class=\"language-text\">least_conn</code> - í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ê°¯ìˆ˜ê°€ ì ì€ ì„œë²„ë¡œ ì „ë‹¬í•˜ëŠ” ì„¤ì •</li>\n<li><code class=\"language-text\">proxy_pass</code> - ë“¤ì–´ì˜¨ ìš”ì²­ì„ ì–´ë””ë¡œ í¬ì›Œë”© í•´ì£¼ëŠ”ì§€ ì§€ì •</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> start:1\n$ <span class=\"token function\">yarn</span> start:2\n$ <span class=\"token function\">yarn</span> start:3\n$ nginx -s reload\n$ ab -n 10 http://127.0.0.1/</code></pre></div>\n<p><code class=\"language-text\">ab</code>ëŠ” <strong>Apache HTTP server benchmarking tool</strong>ë¡œ ì›¹ì„œë²„ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ë„êµ¬ë¡œ ë§ì´ ì“°ì´ëŠ” íˆ´ì´ë‹¤. <code class=\"language-text\">n</code> ì˜µì…˜ì€ ì´ ìš”ì²­ìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cb60bf836084a418c806dbc630f82eb1/8e724/nginx-basic-usage-with-caching-and-load-balancing-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.04166666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB7ElEQVQoz21TyZajMBDjZ6ZZzOoFsyYE6IT0cpj//xiNbEgPhz7oFcSFrJIqwXZfcbnMaOoeXTOg1h2kalBJCykbKL6v7098fv3FbX7gcl2xrBvGy4K2m9D1k6+1HfF+/0TwnD+wrd/o1IA8MVCxhhYWUWKRsIahRpo1GMYNtll4wZWkT2gzIS96jzipEUYaWd4huI0PVN2CnC9lrPyhFDVi0UCkjX93xI6sKAfW2dc0az2JO49i81ODuVuh2glValFF0qvUwlAhSfnsmkRqPZFTU8mRhP2hrvOXvQgdgoEj6Iq+kSSLFGSiUZLIKXw1O6XGzp7gpfiF2PfU/wlDfujgDt44QuikC/fRDteUUmHXLiipLjtInXpfT71+5GFcMQ4rUx5hVA9ZNijymgZbKrJUZ3AdFnytTwz9wi3oYfTAsRvfc+7ryRN83Dast6dPWSUKRmhWvadMOBVF3uI+PbBOG1o5wKRU7cY9zvc+u6d8aWcIkv2hD1VYopYdKnqaOsMPXwS9HesrSiqzvFByG0SyB3cOZB9ZMrnMoAgrSBI2JFMHoThMdx6ajOvEsZQ4Qov3DTjDhyIc85tEHCpEREHjU46VHSuxG78vusfxfFYVJaeURdr6H13CbxxNVANESXX8d8Q/N/+u6Df8A5lrfRUYgBBaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"nginx basic usage with caching and load balancing 5\"\n        title=\"\"\n        src=\"/static/cb60bf836084a418c806dbc630f82eb1/b9e4f/nginx-basic-usage-with-caching-and-load-balancing-5.png\"\n        srcset=\"/static/cb60bf836084a418c806dbc630f82eb1/cf440/nginx-basic-usage-with-caching-and-load-balancing-5.png 148w,\n/static/cb60bf836084a418c806dbc630f82eb1/d2d38/nginx-basic-usage-with-caching-and-load-balancing-5.png 295w,\n/static/cb60bf836084a418c806dbc630f82eb1/b9e4f/nginx-basic-usage-with-caching-and-load-balancing-5.png 590w,\n/static/cb60bf836084a418c806dbc630f82eb1/f9b6a/nginx-basic-usage-with-caching-and-load-balancing-5.png 885w,\n/static/cb60bf836084a418c806dbc630f82eb1/2d849/nginx-basic-usage-with-caching-and-load-balancing-5.png 1180w,\n/static/cb60bf836084a418c806dbc630f82eb1/bbefa/nginx-basic-usage-with-caching-and-load-balancing-5.png 1770w,\n/static/cb60bf836084a418c806dbc630f82eb1/8e724/nginx-basic-usage-with-caching-and-load-balancing-5.png 2880w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>1ë²ˆ ì„œë²„ì—ëŠ” ê°€ì¶©ì¹˜ë¥¼ 5, 2ë²ˆ ì„œë²„ì—ëŠ” ê°€ì¤‘ì¹˜ë¥¼ 3, 3ë²ˆ ì„œë²„ì—ëŠ” ê°€ì¤‘ì¹˜ë¥¼ 2ë¡œ ì„¤ì •í–ˆì—ˆë‹¤. ìœ„ì™€ ê°™ì´ ë‚˜ì˜¨ë‹¤ë©´ ë¡œë“œë°¸ëŸ°ì‹± ì„±ê³µ!! ğŸ‘ğŸ‘</p>","frontmatter":{"title":"Nginx ì‚¬ìš©ë²•, ìºì‹±, ë¡œë“œë°¸ëŸ°ì‹± ì•Œì•„ë³´ê¸°","date":"July 07, 2019"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/nginx/nginx-basic-usage-with-caching-and-load-balancing/","previous":{"fields":{"slug":"/Javascript/code-style-for-performance/"},"frontmatter":{"title":"ì„±ëŠ¥ì„ ë†’ì´ëŠ” ì½”ë“œ ìŠ¤íƒ€ì¼","category":"Javascript"}},"next":null}}