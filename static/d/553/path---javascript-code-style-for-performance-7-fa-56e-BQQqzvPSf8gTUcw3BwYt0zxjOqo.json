{"data":{"site":{"siteMetadata":{"title":"jason.log","author":"Jaesung Lee","siteUrl":"https://jason0853.github.io","comment":{"disqusShortName":"","utterances":"jason0853/gatsby-blog"},"sponsor":{"buyMeACoffeeId":"HFzVClS"}}},"markdownRemark":{"id":"28be205e-5dc2-5625-b165-0a18c4cf3a9e","excerpt":"출처 : NHN은 이렇게 한다! 자바스크립트 성능 이야기 (…","html":"<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7c755fb02c119a9523d21d0e03bd4d2a/2f382/code-style-for-performance-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 134.2512908777969%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"code style for performance 1\"\n        title=\"\"\n        src=\"/static/7c755fb02c119a9523d21d0e03bd4d2a/b9e4f/code-style-for-performance-1.png\"\n        srcset=\"/static/7c755fb02c119a9523d21d0e03bd4d2a/cf440/code-style-for-performance-1.png 148w,\n/static/7c755fb02c119a9523d21d0e03bd4d2a/d2d38/code-style-for-performance-1.png 295w,\n/static/7c755fb02c119a9523d21d0e03bd4d2a/b9e4f/code-style-for-performance-1.png 590w,\n/static/7c755fb02c119a9523d21d0e03bd4d2a/f9b6a/code-style-for-performance-1.png 885w,\n/static/7c755fb02c119a9523d21d0e03bd4d2a/2f382/code-style-for-performance-1.png 1162w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<blockquote>\n<p>출처 : NHN은 이렇게 한다! 자바스크립트 성능 이야기 (1년 전에 사놓고 지금 읽다니 😥😥)</p>\n</blockquote>\n<h2 id=\"성능에-좋은-코드에-대해-관심을-갖던-계기\"><a href=\"#%EC%84%B1%EB%8A%A5%EC%97%90-%EC%A2%8B%EC%9D%80-%EC%BD%94%EB%93%9C%EC%97%90-%EB%8C%80%ED%95%B4-%EA%B4%80%EC%8B%AC%EC%9D%84-%EA%B0%96%EB%8D%98-%EA%B3%84%EA%B8%B0\" aria-label=\"성능에 좋은 코드에 대해 관심을 갖던 계기 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>성능에 좋은 코드에 대해 관심을 갖던 계기?</h2>\n<p>필자가 거래소에서 일하기 전까지 자바스크릡트 코드 성능에 대해 큰 신경을 쓰지 않고 일해온 것이 사실이다. 개발자(?)로서 너무 부끄럽다.😥 경험을 살짝 이야기하자면 거래소 같이 실시간 통신을 해서 거래량을 보여주어야하는 서비스같은 경우 자바스크립트 코드를 어떻게 작성하느냐에 따라 브라우저에 큰 영향을 끼친다는 것을 몸소 체험하게 되었다. 물론 항상 시간에 쫒기며 개발하게 되다보면 이정도(?)는 괜찮겠지 하고 넘어가다 경우가 허다했다. 그래서 지금부터 위 책의 3장에서 제시하는 최적화된 코드에 대해 알아보자!~</p>\n<h3 id=\"객체의-생성-초기화-성능\"><a href=\"#%EA%B0%9D%EC%B2%B4%EC%9D%98-%EC%83%9D%EC%84%B1-%EC%B4%88%EA%B8%B0%ED%99%94-%EC%84%B1%EB%8A%A5\" aria-label=\"객체의 생성 초기화 성능 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체의 생성, 초기화 성능</h3>\n<p>최적화된 <code class=\"language-text\">Array</code> 형식의 객체와 <code class=\"language-text\">Object</code> 형식의 객체 생성과 초기화에 대해 알아보자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> arr1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ❌</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// ✅</span></span></code></pre></div>\n<p>객체 생성 방식에 있어서 두 코드 별 차이는 없으나 <strong>리터럴 형식</strong>(<code class=\"language-text\">arr2</code>)이 조금 더 나은 성능을 보여준다고 한다.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  arr1<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token comment\">// ❌</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  arr2<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i <span class=\"token comment\">// ✅</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>데이터를 배열에 할 경우 <code class=\"language-text\">push()</code> 메서드를 사용하는 것보다 <strong>접근자</strong> <code class=\"language-text\">[]</code>를 사용한 코드가 더 나은 성능을 보여준다.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> obj1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ❌</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">var</span> obj2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token comment\">// ✅</span></span></code></pre></div>\n<p>객체 생성 또한 배열 생성할 때와 마찬가지로 성능상 별 차이는 없다. 하지만 js 파일을 다운로드하는 시간 관점에서 봤을 때는 <strong>리터럴 형식</strong>(<code class=\"language-text\">obj2</code>)처럼 코드 크기를 줄일 수 있는 방법이 성능상 더 좋다고 볼 수 있다.</p>\n<h3 id=\"스코프-체인-탐색과-성능\"><a href=\"#%EC%8A%A4%EC%BD%94%ED%94%84-%EC%B2%B4%EC%9D%B8-%ED%83%90%EC%83%89%EA%B3%BC-%EC%84%B1%EB%8A%A5\" aria-label=\"스코프 체인 탐색과 성능 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스코프 체인 탐색과 성능</h3>\n<p>개발자가 작성한 자바스크립트 코드 자체의 성능이 런타임 성능에 많은 영향을 준다고 한다. 그 중에서도 스코프 체인 탐색을 최적화해 성능을 끌어올리는 방법에 대해 알아보자!</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">window<span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">addData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    data<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">addData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">addData()</code> 함수가 실행되면 <code class=\"language-text\">data</code>와 <code class=\"language-text\">i</code> 속성에 접근하기 위해 스코프 체인 탐색이 시작된다. <code class=\"language-text\">i</code> 함수 안에 지역변수이므로 활성화 객체에서 쉽게 탐색할 수 있다. 하지만 <code class=\"language-text\">data</code> 객체는 활성화 객체에서 탐색하지 못하고 다시 전역 객체를 탐색한다. 결국 <code class=\"language-text\">data</code>를 객체에 접근하기 위해서 loop를 실행하는 동안 <strong>활성화 객체 -> 전역 객체</strong>를 계속 탐색해야한다.</p>\n<p>그럼 위 코드를 개선시켜보자.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">window<span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">addData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">var</span> localData <span class=\"token operator\">=</span> data <span class=\"token comment\">// 👍 important</span></span>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    localData<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">addData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>하이라이트로 된 부분이 핵심 코드이다. <code class=\"language-text\">addData()</code> 함수가 실행되면 <code class=\"language-text\">data</code> 객체에 접근하기 위해 최초 한번만 활성화 객체와 전역 객체를 탐색한다. 그 이후 <code class=\"language-text\">data</code> 객체는 <code class=\"language-text\">localData</code> 지역변수에 저장된다. 그렇기 때문에 loop를 도는 동안 전역 객체를 탐색할 필요가 없다. 결국 탐색 시간이 줄어들었으므로 성능 또한 개선되었다.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">addData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">var</span> localData <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>data</span>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    localData<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">addData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">obj</code> 인스턴스 객체는 <code class=\"language-text\">Object</code>의 프로토타입을 상속받는다. 참조한 경로를 따라 탐색범위를 넓혀 나가므로 탐색과정을 줄여야한다. 그러기 위해선 <code class=\"language-text\">localData</code> 지역변수에 담아 불필요한 탐색과정을 줄여준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">with</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  name <span class=\"token operator\">=</span> <span class=\"token string\">'Jason'</span>\n  age <span class=\"token operator\">=</span> <span class=\"token number\">35</span>\n  job <span class=\"token operator\">=</span> <span class=\"token string\">'Front-end Engineer'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">with</code> 구문을 사용하면 코드가 읽기 쉬워져서 가독성이 좋아지고 코드량도 줄어들어 js 파일을 다운로드 하는 시간이 감소될 것이다. 하지만 <code class=\"language-text\">with</code> 구문의 인자인 <code class=\"language-text\">obj</code> 객체의 멤버로 구성된 활성화 객체가 스코프 체인의 탐색 순위에서 취우선권을 갖는다. 이로 인해 <code class=\"language-text\">with</code> 구문 내의 지역변수 조차도 탐색 경로를 2번 거쳐야 한다. <code class=\"language-text\">try-catch</code> 구문 또한 <code class=\"language-text\">with</code> 구문이랑 같은 방식으로 동작한다. 그렇기 때문에 스코프 체인 탐색 성능에서 문제가 발생하는 걸 감안해야한다는걸 명심하자!</p>\n<h3 id=\"반복문과-성능\"><a href=\"#%EB%B0%98%EB%B3%B5%EB%AC%B8%EA%B3%BC-%EC%84%B1%EB%8A%A5\" aria-label=\"반복문과 성능 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>반복문과 성능</h3>\n<p>자바스크립트에는 <code class=\"language-text\">for</code>, <code class=\"language-text\">for-in</code>, <code class=\"language-text\">while</code>, <code class=\"language-text\">do-while</code>라는 loop 구문들이 있다.</p>\n<p>우선 <code class=\"language-text\">for-in</code> 구문이 테스트 결과 가장 느리다. 나머지 반복문들은 별 차이가 없다. 왜 느릴까? 그 이유는 다른 반복문과 달리 주어진 배열을 순차적으로 탐색하는게 아니라 배열이 아닌 객체로 취급하여 반복 시점마다 객체의 모든 속성을 무작위로 탐색한다. 권장사항으로는 객체의 속성을 탐색하는데만 사용하길…</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\">// ❌</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">++</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ✅</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> size <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> size<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">++</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>보통 반복문을 작성할 때 첫번째 방식처럼 아무 생각없이 작성할 때가 많다. 하지만 첫번째 방식처럼 작성하게 되면 loop를 거칠때마다 <code class=\"language-text\">arr</code> 배열의 length 값을 연산하게 된다. 그렇기 때문에 두번째 방식처럼 <code class=\"language-text\">size</code>라는 지역변수에 배열의 길이를 저장하고 loop를 거칠때마다 <code class=\"language-text\">arr</code> 배열을 거칠 필요없이 지역변수에 접근하여 탐색 과정 시간을 줄인다.</p>\n<h3 id=\"조건문과-성능\"><a href=\"#%EC%A1%B0%EA%B1%B4%EB%AC%B8%EA%B3%BC-%EC%84%B1%EB%8A%A5\" aria-label=\"조건문과 성능 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>조건문과 성능</h3>\n<p>자바스크립트 조건문에는 <code class=\"language-text\">if-else</code>, <code class=\"language-text\">switch-case</code>, <code class=\"language-text\">삼항연산자</code>가 있다.</p>\n<p>세 가지의 조건문 성능 테스트 결과 별 차이는 없다. 하지만 조건 판단 요소가 많아지면 <code class=\"language-text\">switch-case</code> 구문이 좀 더 좋다는 점을 알아두자!</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">numberRange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> range <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">&lt;=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    range <span class=\"token operator\">=</span> <span class=\"token string\">'0~10'</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">&lt;=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    range <span class=\"token operator\">=</span> <span class=\"token string\">'11~20'</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">&lt;=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    range <span class=\"token operator\">=</span> <span class=\"token string\">'21~30'</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    range <span class=\"token operator\">=</span> <span class=\"token string\">'31~'</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> range\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">numberRange</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>숫자 범위를 알아보는 <code class=\"language-text\">numberRange</code>라는 함수가 있다. 위 코드를 좀 더 개선시켜보겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">numberRange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> range <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">&lt;=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">&lt;=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      range <span class=\"token operator\">=</span> <span class=\"token string\">'0~10'</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      range <span class=\"token operator\">=</span> <span class=\"token string\">'11~20'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">&lt;=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      range <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`21~30`</span></span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      range <span class=\"token operator\">=</span> <span class=\"token string\">'31~'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> range\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">numberRange</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"wrap-up\"><a href=\"#wrap-up\" aria-label=\"wrap up permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Wrap-up</h3>\n<p>지금까지 살펴본 최적화된 코드의 형태로 습관을 몸에 익혀놓는 것이 성능 개선에 좀 더 효과적인 방법일거라 생각한다.</p>","frontmatter":{"title":"성능을 높이는 코드 스타일","date":"June 23, 2019"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/Javascript/code-style-for-performance/","previous":{"fields":{"slug":"/Javascript/closure/"},"frontmatter":{"title":"클로저 이해하기","category":"Javascript"}},"next":null}}